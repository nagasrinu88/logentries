<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
            var reqData = [{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":17.537,"writeIOPS":19.0,"totalMemory":15405668,"freeMemory":250156,"cachedMemory":14379208,"postgresMemory":289468,"time":"2015-08-26T23:59:54+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":34.333,"writeIOPS":19.327,"totalMemory":15405668,"freeMemory":215764,"cachedMemory":14417788,"postgresMemory":285848,"time":"2015-08-27T00:12:53+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.0,"writeIOPS":20.112,"totalMemory":15405668,"freeMemory":215508,"cachedMemory":14418204,"postgresMemory":285848,"time":"2015-08-27T00:14:15+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.0,"writeIOPS":19.098,"totalMemory":15405668,"freeMemory":233232,"cachedMemory":14400300,"postgresMemory":285848,"time":"2015-08-27T00:14:54+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":5.0583,"writeIOPS":19.055,"totalMemory":15405668,"freeMemory":229336,"cachedMemory":14405340,"postgresMemory":285848,"time":"2015-08-27T00:16:09+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":17.058,"writeIOPS":18.998,"totalMemory":15405668,"freeMemory":230476,"cachedMemory":14403332,"postgresMemory":285848,"time":"2015-08-27T00:16:46+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.1958,"writeIOPS":19.335,"totalMemory":15405668,"freeMemory":233576,"cachedMemory":14400200,"postgresMemory":285848,"time":"2015-08-27T00:19:17+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":17.454,"writeIOPS":19.201,"totalMemory":15405668,"freeMemory":217488,"cachedMemory":14417148,"postgresMemory":285848,"time":"2015-08-27T00:19:55+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.21661,"writeIOPS":19.024,"totalMemory":15405668,"freeMemory":216132,"cachedMemory":14417520,"postgresMemory":285848,"time":"2015-08-27T00:21:10+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.43323,"writeIOPS":19.516,"totalMemory":15405668,"freeMemory":233656,"cachedMemory":14400200,"postgresMemory":286292,"time":"2015-08-27T00:21:52+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":34.904,"writeIOPS":19.394,"totalMemory":15405668,"freeMemory":197272,"cachedMemory":14373600,"postgresMemory":286292,"time":"2015-08-27T00:23:04+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.15833,"writeIOPS":20.381,"totalMemory":15405668,"freeMemory":259532,"cachedMemory":14374328,"postgresMemory":286292,"time":"2015-08-27T00:24:22+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.016602,"writeIOPS":19.095,"totalMemory":15405668,"freeMemory":259260,"cachedMemory":14374516,"postgresMemory":286292,"time":"2015-08-27T00:25:00+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.070801,"writeIOPS":19.315,"totalMemory":15405668,"freeMemory":259880,"cachedMemory":14374756,"postgresMemory":286292,"time":"2015-08-27T00:26:13+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":17.058,"writeIOPS":19.242,"totalMemory":15405668,"freeMemory":241976,"cachedMemory":14391308,"postgresMemory":286292,"time":"2015-08-27T00:27:29+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":6,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":17.058,"writeIOPS":19.097,"totalMemory":15405668,"freeMemory":199816,"cachedMemory":14407864,"postgresMemory":286292,"time":"2015-08-27T00:28:06+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.20416,"writeIOPS":19.63,"totalMemory":15405668,"freeMemory":259964,"cachedMemory":14374520,"postgresMemory":286292,"time":"2015-08-27T00:29:20+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":17.371,"writeIOPS":19.398,"totalMemory":15405668,"freeMemory":243060,"cachedMemory":14391384,"postgresMemory":286292,"time":"2015-08-27T00:29:57+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.28333,"writeIOPS":18.935,"totalMemory":15405668,"freeMemory":241504,"cachedMemory":14391836,"postgresMemory":286292,"time":"2015-08-27T00:31:13+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.18329,"writeIOPS":19.68,"totalMemory":15405668,"freeMemory":240620,"cachedMemory":14392204,"postgresMemory":286292,"time":"2015-08-27T00:31:54+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":34.287,"writeIOPS":19.338,"totalMemory":15405668,"freeMemory":207808,"cachedMemory":14425308,"postgresMemory":286292,"time":"2015-08-27T00:33:10+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.0,"writeIOPS":20.775,"totalMemory":15405668,"freeMemory":206784,"cachedMemory":14425804,"postgresMemory":286292,"time":"2015-08-27T00:34:26+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":7,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.0,"writeIOPS":19.062,"totalMemory":15405668,"freeMemory":209340,"cachedMemory":14381332,"postgresMemory":286292,"time":"2015-08-27T00:35:05+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":0.19995,"writeIOPS":19.323,"totalMemory":15405668,"freeMemory":250688,"cachedMemory":14381712,"postgresMemory":286232,"time":"2015-08-27T00:36:23+00:00"},{"currentTransactions":498918,"dbSize":41552056,"tables":42,"activeConnections":5,"waitingConnections":0,"indexCacheHitRatio":0.99998,"tableCacheHitRatio":1.0,"readIOPS":17.362,"writeIOPS":19.252,"totalMemory":15405668,"freeMemory":233584,"cachedMemory":14398576,"postgresMemory":286756,"time":"2015-08-27T00:37:03+00:00"}];
        </script>
        <script type="text/javascript">
            // Load the Visualization API and the piechart package.
            google.load('visualization', '1', {'packages': ['corechart']});

            // Set a callback to run when the Google Visualization API is loaded.
            google.setOnLoadCallback(drawChart);


            // Callback that creates and populates a data table, 
            // instantiates the pie chart, passes in the data and
            // draws it.
            function drawChart() {

                // Create the data table.
                var data = new google.visualization.DataTable();                
                data.addColumn('date', 'Time');
                data.addColumn('number', 'Reads');
                data.addColumn('number', 'Writes');
                
                var memoryChartData = new google.visualization.DataTable();
                memoryChartData.addColumn('date', 'Time');
                memoryChartData.addColumn('number', 'Total');
                memoryChartData.addColumn('number', 'Free');
                memoryChartData.addColumn('number', 'Cached');
                
                var connectionsChartData = new google.visualization.DataTable();
                connectionsChartData.addColumn('date', 'Time');
                connectionsChartData.addColumn('number', 'Active');
                connectionsChartData.addColumn('number', 'Waiting');
                
                var transactionsChartData = new google.visualization.DataTable();
                transactionsChartData.addColumn('date', 'Time');
                transactionsChartData.addColumn('number', 'Transactions');
                
                var _data = [];
                var _memoryData = [];
                var _connectionsData = [];
                var _transactionsData = [];
                var MEMORY_FACTOR = 1024*1024;
                for(var i=0;i<reqData.length;i++){
                    var _d = reqData[i];
                    //_data.push([new Date(_d.time),_d.currentTransactions]);
                    _data.push([new Date(_d.time),_d.readIOPS,_d.writeIOPS]);
                    _memoryData.push([new Date(_d.time),_d.totalMemory/MEMORY_FACTOR,_d.freeMemory/MEMORY_FACTOR,_d.cachedMemory/MEMORY_FACTOR]);
                    _connectionsData.push([new Date(_d.time),_d.activeConnections,_d.waitingConnections]);
                    _transactionsData.push([new Date(_d.time),_d.currentTransactions]);
                }
                data.addRows(_data);
                memoryChartData.addRows(_memoryData);
                connectionsChartData.addRows(_connectionsData);
                transactionsChartData.addRows(_transactionsData);

                // Set chart options
                var options = {'title': 'Read Vs Write IOPS',
                    'width': 600,
                    'height': 400
                };

                // Instantiate and draw our chart, passing in some options.
                var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                chart.draw(data, options);
                var memoryChart = new google.visualization.LineChart(document.getElementById('memory_chart_div'));
                memoryChart.draw(memoryChartData, options);
                var connectionsChart = new google.visualization.LineChart(document.getElementById('connections_chart_div'));
                connectionsChart.draw(connectionsChartData, options);
                var connectionsChart = new google.visualization.LineChart(document.getElementById('transactions_chart_div'));
                connectionsChart.draw(transactionsChartData, options);
            }
        </script>
        <style type="text/css">
            body{
                padding:0;
                margin:0;
            }
            .chart-block{
                width:50%;
                float: left;
                display: inline-block;
                border: 2px solid #eee;
                box-sizing: border-box;
            }
        </style>
    </head>
    <body>
        <div>
            <div id="chart_div" class="chart-block"></div>
            <div id="memory_chart_div" class="chart-block"></div>
            <div id="connections_chart_div" class="chart-block"></div>
            <div id="transactions_chart_div" class="chart-block"></div>
        </div>
        
    </body>
</html>
